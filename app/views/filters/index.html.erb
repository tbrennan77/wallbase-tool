<script>
  $(document).ready(function() {
      function updateCount() {
        count = $('#selectedColors').children().length-1;
        word = 'samples'
        if (count == 1) {
          word = 'sample';
        }

        $('#addLink').text("Add "+count+" "+word+" to cart");
      }
      $('select').hide();
      if (IpadIsNotStandalone()) {DisplayAddToHomeScreenPopup();}

      $('.single-parent').hide()
      appear_class = 'fadeInRightBig'
      disappear_class = 'fadeOutLeftBig'      

      $('form#search-form').live('change', function() {
        $(this).submit();        
      });

      $('form.details-form').live('change', function() {
        if ($(this).find('select').val() != "") {
          $(this).submit();
          $('.result-parent').removeClass(appear_class).addClass(disappear_class);
          $('.single-parent').removeClass(disappear_class).addClass(appear_class).show();      
          $('.result-parent').fadeOut();                
        }
      });

      $('.back-to-filter').live('click', function() {  
        $('form#search-form').submit();
        $('.single-parent').removeClass(appear_class).addClass(disappear_class);
        $('.result-parent').removeClass(disappear_class).addClass(appear_class).show();      
        $('.single-parent').fadeOut();
      });

      $('label.color-label').live('change', function() {
        var name  = $(this).find('input').val();
        var color = $(this).data('color');
        if ($(this).find('input').is(':checked')) {
          $(this).addClass('active');
          $('#selectedColors').append('<li><label style="background: #EFEFEF; color: #'+color+'">'+name+'<input type="checkbox" value="'+name+'" checked="checked" /></label></li> ');
          updateCount();
        } else {
          $(this).removeClass('active');
          $('#selectedColors li').find('input[value="'+name+'"]').parent().parent().remove();
          updateCount();
        }
      });

  });
 $(document).foundation('joyride', 'start');
</script>


<style>
div.filter-select, div.filter-select ul  {
  width: 100% !important;
}
li {list-style-type: none;}
a.learn-more {font-size: 16px;}
a#reset:hover {color: white; background: #93cede;}
a#reset {
  background: #F6F6F6;
  width: 100%;
  display: inline-block;
  padding: 11px;
  text-align: center;
  color: #3B9FBC;
  border: 1px solid #DDD;
  border-radius: 3px;
  margin-bottom: 8px;
}

form #color label {
  padding: 20px;  
  color: #3b9fbc;
  background: #F6F6F6;
  border-top: 1px solid #DDD;
  margin-bottom:0;
  border-left: 1px solid #DDD;
  border-right: 1px solid #DDD;  
}

#segments label.segment_label:last-child {border-bottom: 1px solid #DDD;}

label.color-label:hover {
  color: white;
  background: #93cede;
}
label.color-label {
  width: 50px;
  height: 50px;
  box-shadow: 0 1px 3px #AAA;
}
label.active { 
  border: 3px dashed yellow;  
}

#results img {
  border: 1px solid #888;
  box-shadow: 0 1px 3px #AAA;
}
.profile-image {
  width: 240px; height: 240px; box-shadow: 0 1px 3px #aaa;
}
.full-width {width:100%;}
.notcurrent {display: none;}
nav.top-bar {display:none;}
h3 {color: black;right; text-align: right; margin-bottom: -17px;}
ul#heading li {display:inline-block;}
ul#heading img {vertical-align: middle; margin-right: 25px;margin-top:20px;}  
.floor_types label {background: white;padding-left: 40px;}
ul#selectedColors {height: 140px;}
img:hover {cursor: default !important;}
li.name {text-transform: uppercase;}
</style>
<style media="all and (orientation:portrait)">#addToHomeScreen{left: 65px;}</style>

<div id="addToHomeScreen">
  <img src="/assets/button.png" />
  Tap this icon.<br />
  Then '<b>Add to Home Screen</b>'<br />
  to install.
</div>

<div class="row">
  <div class="large-4 columns">
    <%= link_to "Reset", root_path, id: 'reset' %>
    <h4>FILTER BY:</h4>    
    <div id="search" class="ajax-container search">
      <%= render 'search' %>
    </div>
    <div class='color-legend'>      
      <% ColorPalette.all.each do |cp| %>
      <div class='row'>
        <div class='large-2 columns' style="text-align: right; padding: 0; padding-right: 8px;">
          <span class="color-palette round color-palette-<%= cp.name %>" style="left:20px !important"><%= cp.name %></span>
        </div>
        <div class='large-10 columns' style="padding: 0">
           - <%= nice_color_palette_name_for cp %>
         </div>
      </div>
      <br />
      <% end %>
    </div>
  </div>

  <div class="result-parent animated large-8 columns">
    <h4 id="firstStop">WALLBASE</h4>
    <div id="results" class="ajax-container results">
      <%= render 'results' %>
    </div>
  </div>

  <div class="single-parent large-8 columns animated">
    <div id="details" class="ajax-container details">      
      <%#= Placeholder for details partial %>
    </div>
  </div>

  <ol class="joyride-list" data-joyride>
  <li data-id="firstStop" data-text="Next">
    <p>Hello and welcome to the Joyride documentation page.</p>
  </li>
  <li data-id="numero1" data-class="custom so-awesome" data-text="Next">
    <h4>Stop #1</h4>
    <p>You can control all the details for you tour stop. Any valid HTML will work inside of Joyride.</p>
  </li>
  <li data-id="numero2" data-button="Next" data-options="tipLocation:top;tipAnimation:fade">
    <h4>Stop #2</h4>
    <p>Get the details right by styling Joyride with a custom stylesheet!</p>
  </li>
  <li data-button="Next">
    <h4>Stop #4</h4>
    <p>It works as a modal too!</p>
  </li>
</ol>